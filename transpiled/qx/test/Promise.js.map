{
  "version": 3,
  "sources": [
    "/home/runner/work/qxl.tutorial/qxl.tutorial/node_modules/@qooxdoo/compiler/node_modules/@qooxdoo/framework/source/class/qx/test/Promise.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "dev",
    "unit",
    "TestCase",
    "members",
    "testNewPromise",
    "self",
    "p",
    "Promise",
    "resolve",
    "reject",
    "setTimeout",
    "then",
    "value",
    "assertIdentical",
    "assertEquals",
    "resume",
    "err",
    "assertTrue",
    "wait",
    "testReject",
    "Error",
    "message",
    "testCatchFinally",
    "caughtException",
    "ex",
    "assertNotNull",
    "testAllOf",
    "t",
    "dt",
    "Date",
    "obj",
    "a",
    "b",
    "c",
    "d",
    "e",
    "allOf",
    "obj2",
    "testPropertySetValueAsPromise1",
    "Clazz",
    "core",
    "Object",
    "properties",
    "alpha",
    "init",
    "nullable",
    "prototype",
    "setAlpha",
    "assertFalse",
    "setAlphaAsync",
    "getAlpha",
    "undefine",
    "testPropertySetValueAsPromise2",
    "async",
    "testPropertySetValueAsyncApply1",
    "apply",
    "event",
    "_applyAlpha",
    "oldValue",
    "eventFired",
    "addListener",
    "evt",
    "testPropertySetValueAsyncApply2",
    "testPropertySetValueAsyncApply3",
    "check",
    "testBinding",
    "AsyncClazz",
    "SyncClazz",
    "bravo",
    "asyncToSync",
    "asyncObj",
    "syncObj",
    "p1",
    "addListenerOnce",
    "data",
    "getData",
    "p2",
    "bravoEvents",
    "id",
    "assertNull",
    "removeListenerById",
    "getAlphaAsync",
    "bind",
    "all",
    "p3",
    "setBravo",
    "testAsyncEventHandlers",
    "console",
    "log",
    "_applyBravo",
    "createObj",
    "name",
    "set",
    "str",
    "length",
    "objOne",
    "objTwo",
    "testWaterfallBinding",
    "getValue",
    "objs",
    "trap",
    "i",
    "bindPromise",
    "bindAsync",
    "getTarget",
    "delay",
    "mapSeries",
    "testEach1",
    "arr",
    "Array",
    "push",
    "promise",
    "forEach",
    "item",
    "testEach2",
    "assertInstance",
    "pEach",
    "pThen",
    "testGlobalError",
    "GlobalError",
    "setErrorHandler",
    "testMethod",
    "fn",
    "method",
    "testBinding1",
    "Assert",
    "testBinding2",
    "testMarshal",
    "marshal",
    "Json",
    "toClass",
    "test",
    "TEST_MODEL",
    "children",
    "model",
    "toModel",
    "testBindingToStatic",
    "testBindingResolve",
    "testBindingReject",
    "testWrapping",
    "spread",
    "join",
    "statics"
  ],
  "mappings": "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",
  "sourcesContent": [
    "qx.Class.define(\"qx.test.Promise\", {\n  extend: qx.dev.unit.TestCase,\n\n  members: {\n\n    /**\n     * Tests a new promise that resolves with no errors\n     */\n    testNewPromise: function() {\n      var self = this;\n      var p = new qx.Promise(function(resolve, reject) {\n        setTimeout(function() {\n          resolve(\"ok\");\n        });\n      }, this);\n      p.then(function(value) {\n        this.assertIdentical(this, self);\n        this.assertEquals(value, \"ok\");\n        this.resume();\n      }, function(err) {\n        this.assertTrue(false);\n        this.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests a new promise that is rejected\n     */\n    testReject: function() {\n      var self = this;\n      var p = new qx.Promise(function(resolve, reject) {\n        setTimeout(function() {\n          reject(new Error(\"oops\"));\n        });\n      }, this);\n      p.then(function(value) {\n        this.assertTrue(false);\n        this.resume();\n      }, function(err) {\n        this.assertIdentical(this, self);\n        this.assertEquals(err.message, \"oops\");\n        this.resume();\n      });\n      this.wait(1000);\n    },\n\n    testCatchFinally: function() {\n    \tvar caughtException = null;\n    \tqx.Promise.resolve()\n    \t\t.then(function() {\n    \t\t\tthrow new Error(\"oops\");\n    \t\t}).catch(function(ex) {\n    \t\t\tcaughtException = ex;\n\t    \t}).finally(function() {\n\t      \tthis.assertNotNull(caughtException);\n\t      \tthis.resume();\n\t    \t}, this);\n    \tthis.wait(1000);\n    },\n\n    /**\n     * Tests the qx.Promise.allOf method\n     */\n    testAllOf: function() {\n      var t = this;\n      var dt = new Date();\n      var obj = {\n          a: new qx.Promise(),\n          b: new qx.Promise(),\n          c: new qx.Promise(),\n          d: \"four\",\n          e: dt\n      }\n      qx.Promise.allOf(obj)\n        .then(function(obj2) {\n          t.assertTrue(obj === obj2);\n          t.assertEquals(\"one\", obj.a);\n          t.assertEquals(\"two\", obj.b);\n          t.assertEquals(\"three\", obj.c);\n          t.assertEquals(\"four\", obj.d);\n          t.assertTrue(obj.e === dt);\n          t.resume();\n        });\n      obj.a.then(function() {\n        obj.b.resolve(\"two\");\n      });\n      obj.b.then(function() {\n        obj.c.resolve(\"three\");\n      });\n      obj.a.resolve(\"one\");\n      t.wait(1000);\n    },\n\n    /**\n     * Tests that setting a property value with a promise will delay setting the\n     * value until the promise is resolved.  In this case, the property is *not*\n     * marked as async and the setXxx method is used\n     */\n    testPropertySetValueAsPromise1: function() {\n      var t = this;\n      var Clazz = qx.Class.define(\"testPropertySetValueAsPromise1.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true\n          }\n        }\n      });\n      this.assertTrue(!!Clazz.prototype.setAlpha);\n      this.assertFalse(!!Clazz.prototype.setAlphaAsync);\n      var obj = new Clazz();\n      var p = new qx.Promise(function(resolve) {\n        resolve(123);\n      });\n      obj.setAlpha(p);\n      p.then(function() {\n        t.assertEquals(123, obj.getAlpha());\n        qx.Class.undefine(\"testPropertySetValueAsPromise1.Clazz\");\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests that setting a property value with a promise will delay setting the\n     * value until the promise is resolved.  In this case, the property *is*\n     * marked as async and the setXxxAsync method is used to test chaining\n     */\n    testPropertySetValueAsPromise2: function() {\n      var t = this;\n      var Clazz = qx.Class.define(\"testPropertySetValueAsPromise2.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true,\n            async: true\n          }\n        }\n      });\n      this.assertTrue(!!Clazz.prototype.setAlpha);\n      this.assertTrue(!!Clazz.prototype.setAlphaAsync);\n      var obj = new Clazz();\n      var p = new qx.Promise(function(resolve) {\n        resolve(123);\n      });\n      obj.setAlphaAsync(p).then(function() {\n        t.assertEquals(123, obj.getAlpha());\n        qx.Class.undefine(\"testPropertySetValueAsPromise2.Clazz\");\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests that a property apply method can return a promise; in this case, the\n     * property is not marked as async so the apply method is only able to delay\n     * the event handler\n     */\n    testPropertySetValueAsyncApply1: function() {\n      var t = this;\n      var p;\n      var Clazz = qx.Class.define(\"testPropertySetValueAsyncApply1.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true,\n            apply: \"_applyAlpha\",\n            event: \"changeAlpha\"\n          }\n        },\n\n        members: {\n          _applyAlpha: function(value, oldValue) {\n            return p = new qx.Promise(function(resolve) {\n              setTimeout(function() {\n                resolve(\"xyz\");\n              }, 250);\n            });\n          }\n        }\n      });\n      var obj = new Clazz();\n      var eventFired = 0;\n      obj.addListener(\"changeAlpha\", function(evt) {\n        eventFired++;\n      });\n      obj.setAlpha(\"abc\");\n      this.assertTrue(!!p);\n      this.assertEquals(0, eventFired);\n      this.assertEquals(\"abc\", obj.getAlpha());\n      p.then(function(value) {\n        this.assertEquals(\"xyz\", value); // \"xyz\" because this is the internal promise\n        this.assertEquals(\"abc\", obj.getAlpha());\n        this.assertEquals(1, eventFired);\n        qx.Class.undefine(\"testPropertySetValueAsyncApply1.Clazz\");\n        t.resume();\n      }, this);\n      this.wait(1000);\n    },\n\n    /**\n     * Tests that a property apply method can return a promise; in this case, the\n     * property *is* marked as async, and we use the setAlphaAsync to test chaining\n     */\n    testPropertySetValueAsyncApply2: function() {\n      var t = this;\n      var Clazz = qx.Class.define(\"testPropertySetValueAsyncApply2.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true,\n            async: true,\n            apply: \"_applyAlpha\",\n            event: \"changeAlpha\"\n          }\n        },\n\n        members: {\n          _applyAlpha: function(value, oldValue) {\n            return new qx.Promise(function(resolve) {\n              setTimeout(function() {\n                resolve(\"xyz\");\n              }, 250);\n            });\n          }\n        }\n      });\n      var obj = new Clazz();\n      var eventFired = 0;\n      obj.addListener(\"changeAlpha\", function(evt) {\n        eventFired++;\n      });\n      var p = obj.setAlphaAsync(\"abc\");\n      this.assertEquals(0, eventFired);\n      p.then(function(value) {\n        this.assertEquals(\"abc\", value);\n        this.assertEquals(\"abc\", obj.getAlpha());\n        this.assertEquals(1, eventFired);\n\n        // Set the same value, should return a new promise but not fire an event\n        p = obj.setAlphaAsync(\"abc\");\n        p.then(function(value) {\n          this.assertEquals(\"abc\", value);\n          this.assertEquals(\"abc\", obj.getAlpha());\n          this.assertEquals(1, eventFired);\n          qx.Class.undefine(\"testPropertySetValueAsyncApply2.Clazz\");\n          t.resume();\n        }, this);\n      }, this);\n      this.wait(1000);\n    },\n\n    /**\n     * Tests that a property apply method can take a promise\n     */\n    testPropertySetValueAsyncApply3: function() {\n      var t = this;\n      var Clazz = qx.Class.define(\"testPropertySetValueAsyncApply3.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true,\n            check: \"qx.Promise\"\n          }\n        }\n      });\n      var obj = new Clazz();\n      var p = qx.Promise.resolve(\"hello\");\n      obj.setAlpha(p);\n      this.assertEquals(p, obj.getAlpha());\n      qx.Class.undefine(\"testPropertySetValueAsyncApply3.Clazz\");\n    },\n\n    testBinding: function() {\n      var t = this;\n      var AsyncClazz = qx.Class.define(\"testBinding.AsyncClazz\", {\n        extend: qx.core.Object,\n        properties: {\n          alpha: {\n            init: null,\n            nullable: true,\n            async: true,\n            event: \"changeAlpha\"\n          }\n        },\n\n        members: {\n          _applyAlpha: function(value, oldValue) {\n            return new qx.Promise(function(resolve) {\n              setTimeout(resolve, 250);\n            });\n          }\n        }\n      });\n      var SyncClazz = qx.Class.define(\"testBinding.SyncClazz\", {\n        extend: qx.core.Object,\n        properties: {\n          bravo: {\n            init: null,\n            nullable: true,\n            event: \"changeBravo\"\n          }\n        }\n      });\n\n      /*\n       * Test binding an async property to a \"normal\" sync property\n       */\n      var asyncToSync = new qx.Promise(function(resolve) {\n\t      var asyncObj = new AsyncClazz();\n\t      var syncObj = new SyncClazz();\n\n\t      var p1 = new qx.Promise();\n        asyncObj.addListenerOnce(\"changeAlphaAsync\", function(evt) {\n        \tvar data = evt.getData();\n        \tthis.assertTrue(data instanceof qx.Promise);\n        \tp1.resolve();\n        }, this);\n\n\t      var p2 = new qx.Promise();\n\t      var bravoEvents = 0;\n        var id = syncObj.addListener(\"changeBravo\", function(evt) {\n        \tbravoEvents++;\n        \tthis.assertTrue(bravoEvents <= 2);\n        \tvar data = evt.getData();\n\n        \t// First event is .bind() setting the initial value\n        \tif (bravoEvents == 1) {\n        \t\tthis.assertNull(data);\n\n        \t// Second event was caused by asyncObj.setAlphaAsync()\n        \t} else if (bravoEvents == 2) {\n\t        \tthis.assertEquals(\"zyx\", data);\n\t        \tsyncObj.removeListenerById(id);\n\t        \tp2.resolve();\n        \t}\n        }, this);\n\n        asyncObj.getAlphaAsync();\n\t      asyncObj.bind(\"alphaAsync\", syncObj, \"bravo\");\n\t      asyncObj.setAlphaAsync(\"zyx\");\n\t      qx.Promise.all([p1, p2]).then(function() {\n\t\t      var p3 = new qx.Promise();\n\t        syncObj.addListenerOnce(\"changeBravo\", function(evt) {\n\t        \tvar data = evt.getData();\n\t        \tthis.assertEquals(\"wvu\", data);\n\t        \tp3.resolve();\n\t        }, this);\n\n\t\t      asyncObj.setAlphaAsync(\"wvu\");\n\t\t      p3.then(function() {\n\t\t      \tthis.resume();\n\t\t      }, this);\n\n\t      }, this);\n      }, this);\n\n      /*\n       * Test binding a \"normal\" sync property to an async property\n       */\n      asyncToSync.then(function() {\n\t      var asyncObj = new AsyncClazz();\n\t      var syncObj = new SyncClazz();\n\n\t      var p1 = new qx.Promise();\n\t      asyncObj.addListenerOnce(\"changeAlphaAsync\", function(evt) {\n\t      \tvar data = evt.getData();\n\t      \tthis.assertEquals(\"def\", data);\n\t      \tp1.resolve();\n\t      }, this);\n\n\t      syncObj.bind(\"bravo\", asyncObj, \"alphaAsync\");\n\t      syncObj.setBravo(\"def\");\n\n\t      p1.then(function() {\n\t\t      var p2 = new qx.Promise();\n\t\t      asyncObj.addListenerOnce(\"changeAlphaAsync\", function(evt) {\n\t\t      \tvar data = evt.getData();\n\t\t      \tthis.assertEquals(\"ghi\", data);\n\t\t      \tp2.resolve();\n\t\t      }, this);\n\n\t\t      syncObj.setBravo(\"ghi\");\n\t\t      return p2.then(function() {\n\n\t\t      \tqx.Class.undefine(\"testBinding.AsyncClazz\");\n\t\t      \tqx.Class.undefine(\"testBinding.SyncClazz\");\n\t\t      \tthis.resume();\n\t\t      }, this);\n\t      }, this);\n      }, this);\n\n      this.wait(1000);\n    },\n\n    /**\n     * Tests event handlers bound to the \"changeXxxAsync\" events, and which return\n     * a promise.  Event handlers must be triggered in sequence and by returning\n     * a promise will defer subsequent event handlers from firing\n     */\n    testAsyncEventHandlers: function() {\n      var Clazz = qx.Class.define(\"testAsyncEventHandlers.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n        \tvalue: {\n\n        \t},\n          alpha: {\n            init: null,\n            nullable: true,\n            async: true,\n            apply: \"_applyAlpha\",\n            event: \"changeAlpha\"\n          },\n          bravo: {\n            init: null,\n            nullable: true,\n            async: true,\n            apply: \"_applyBravo\",\n            event: \"changeBravo\"\n          }\n        },\n\n        members: {\n        \t_applyAlpha: function(value, oldValue) {\n            var p = new qx.Promise(function(resolve) {\n              console.log(\"in _applyAlpha qx.Promise, value=\" + value);\n              setTimeout(function() {\n                console.log(\"in _applyAlpha resolving qx.Promise, value=\" + value);\n                resolve(\"xyz\");\n              }, 50);\n            });\n            console.log(\"in _applyAlpha, value=\" + value + \", p=\" + p);\n            return p;\n          },\n          _applyBravo: function(value, oldValue) {\n            return new qx.Promise(function(resolve) {\n              setTimeout(function() {\n                resolve(\"uvw\");\n              }, 50);\n            });\n          }\n        }\n      });\n\n      function createObj(name) {\n\t      var obj = new Clazz().set({ value: name });\n\t      obj.addListener(\"changeAlphaAsync\", function(evt) {\n\t        var value = evt.getData();\n\t      \tvar p = new qx.Promise(function(resolve) {\n            console.log(name + \": changeAlphaAsync 1 in qx.Promise, value=\" + value);\n\t      \t\tsetTimeout(function() {\n\t      \t\t\tif (str.length)\n\t      \t\t\t\tstr += \",\";\n\t      \t\t\tstr += name;\n              console.log(name + \": changeAlphaAsync 1 resolving qx.Promise, value=\" + value);\n\t      \t\t\tresolve();\n\t      \t\t}, 200);\n\t      \t}).then(function() {\n            console.log(name + \": changeAlphaAsync 1 resolved qx.Promise, value=\" + value);\n\t      \t});\n          console.log(name + \": changeAlphaAsync 1, value=\" + value + \", p=\" + p);\n\t      \treturn p;\n\t      });\n\t      return obj;\n      }\n\n      var objOne = createObj(\"one\");\n      var objTwo = createObj(\"two\");\n\n      var str = \"\";\n      objOne.addListener(\"changeAlphaAsync\", function(evt) {\n        var value = evt.getData();\n      \tconsole.log(\"objOne.alphaAsync setting, value=\" + value);\n      \treturn objTwo.setAlphaAsync(\"def\").then(function() {\n      \t\tstr += \"xxx\";\n      \t\tconsole.log(\"objOne.alphaAsync done, value=\" + value);\n      \t});\n      });\n\n      console.log(\"objOne.alphaAsync going to set value=abc\");\n      objOne.setAlphaAsync(\"abc\").then(function() {\n        console.log(\"objOne.alphaAsync completed set value=abc\");\n      \tthis.assertEquals(\"one,twoxxx\", str);\n      \tqx.Class.undefine(\"testAsyncEventHandlers.Clazz\");\n      \tthis.resume();\n      }, this);\n      this.wait(2500);\n    },\n\n    /**\n     * Tests using bind() on async properties (using the \"changeXxxAsync\" events) between\n     * a series of objects.  The test must show that the property values are fired in\n     * order, and that if an async event handler returns a promise it defers bind from\n     * propagating onto other objects.\n     */\n    testWaterfallBinding: function() {\n    \tvar t = this;\n      var Clazz = qx.Class.define(\"testWaterfallBinding.Clazz\", {\n        extend: qx.core.Object,\n        properties: {\n        \tvalue: {\n\n        \t},\n          alpha: {\n            init: null,\n            nullable: true,\n            async: true,\n            apply: \"_applyAlpha\",\n            event: \"changeAlpha\"\n          }\n        },\n\n        members: {\n          _applyAlpha: function(value, oldValue) {\n          \tvar t = this;\n          \tconsole.log(\"pre applyAlpha[\" + t.getValue() + \"] = \" + value);\n            return new qx.Promise(function(resolve) {\n              setTimeout(function() {\n              \tconsole.log(\"applyAlpha[\" + t.getValue() + \"] = \" + value);\n                resolve(\"xyz\");\n              }, 50);\n            });\n          }\n        }\n      });\n      var objs = [];\n      var str = \"\";\n\n      function trap(i) {\n      \tvar obj = new Clazz().set({value: i});\n      \tvar bindPromise;\n      \tif (i > 0) {\n      \t\tbindPromise = objs[i - 1].bindAsync(\"alphaAsync\", obj, \"alphaAsync\");\n      \t} else {\n      \t\tbindPromise = qx.Promise.resolve(true);\n      \t}\n      \treturn bindPromise.then(function() {\n        \tobj.addListener(\"changeAlpha\", function(evt) {\n        \t\tvar obj = evt.getTarget();\n        \t\tvar data = evt.getData();\n        \t\tvar delay = (5-i+1) * 100;\n        \t\tconsole.log(\"pre changeAlpha \" + obj.getValue() + \" = \" + data + \" after \" + delay);\n\n        \t\treturn new qx.Promise(function(resolve) {\n        \t\t\tsetTimeout(function() {\n        \t\t\t\tif (str.length)\n        \t\t\t\t\tstr += \",\";\n            \t\tstr += obj.getValue() + \":\" + data;\n            \t\tconsole.log(\"changeAlpha \" + obj.getValue() + \" = \" + data + \" after \" + delay);\n            \t\tresolve();\n        \t\t\t}, delay);\n        \t\t});\n        \t}, this);\n        \tobjs[i] = obj;\n      \t});\n      }\n\n      qx.Promise.mapSeries([0, 1, 2, 3, 4], trap)\n      \t.then(function() {\n          var p = objs[0].setAlphaAsync(\"abc\");\n\n          p.then(function() {\n            t.assertEquals(\"0:abc,1:abc,2:abc,3:abc,4:abc\", str);\n            qx.Class.undefine(\"testWaterfallBinding.Clazz\");\n          \tt.resume();\n          }, t);\n\n      \t});\n\n      this.wait(10000);\n    },\n\n    /**\n     * Tests the each method of promise, using qx.data.Array which the Bluebird implementation\n     * does not understand.  The values are scalar values\n     */\n    testEach1: function() {\n      var t = this;\n      var arr = new qx.data.Array();\n      arr.push(\"a\");\n      arr.push(\"b\");\n      arr.push(\"c\");\n      var str = \"\";\n      var promise = qx.Promise.resolve(arr);\n      promise.forEach(function(item) {\n        str += item;\n      }).then(function() {\n        t.assertEquals(\"abc\", str);\n        t.resume();\n      });\n      t.wait(1000);\n    },\n\n    /**\n     * Tests the each method of promise, using qx.data.Array which the Bluebird implementation\n     * does not understand.  The values are a mixture of promises and scalar values\n     */\n    testEach2: function() {\n      var t = this;\n      var arr = new qx.data.Array();\n      arr.push(new qx.Promise(function(resolve) {\n        setTimeout(function() { resolve(\"a\"); }, 500);\n      }));\n      arr.push(new qx.Promise(function(resolve) {\n        setTimeout(function() { resolve(\"b\"); }, 300);\n      }));\n      arr.push(new qx.Promise(function(resolve) {\n        setTimeout(function() { resolve(\"c\"); }, 100);\n      }));\n      arr.push(\"d\");\n      arr.push(\"e\");\n      var str = \"\";\n      var promise = qx.Promise.resolve(arr);\n      this.assertInstance(promise, qx.Promise);\n      var pEach = promise.forEach(function(item) {\n        str += item;\n      });\n      this.assertInstance(pEach, qx.Promise);\n      var pThen = pEach.then(function() {\n        t.assertEquals(\"abcde\", str);\n        t.resume();\n      });\n      this.assertInstance(pThen, qx.Promise);\n      t.wait(1000);\n    },\n\n    /**\n     * Tests unhandled rejections being passed to the global error handler\n     */\n    testGlobalError: function() {\n      var t = this;\n      qx.event.GlobalError.setErrorHandler(function(ex) {\n        t.assertEquals(ex.message, \"oops\");\n        t.resume();\n      });\n      var self = this;\n      var p = new qx.Promise(function(resolve, reject) {\n        setTimeout(function() {\n          resolve(\"ok\");\n        });\n      }, this);\n      p.then(function(value) {\n        throw new Error(\"oops\");\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests promisification of methods\n     */\n    testMethod: function() {\n      var t = this;\n      var fn = qx.Promise.method(function(value) {\n        return value;\n      });\n      var promise = fn(\"yes\");\n      this.assertInstance(promise, qx.Promise);\n      promise.then(function(value) {\n        t.assertEquals(value, \"yes\");\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests binding of all callbacks via .bind()\n     */\n    testBinding1: function() {\n      var t = this;\n      var p = qx.Promise.resolve(\"hello\").bind(this);\n      p.then(function(value) {\n        qx.core.Assert.assertIdentical(t, this);\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests binding on a per-method basis\n     */\n    testBinding2: function() {\n      var t = this;\n      var p = qx.Promise.forEach(\n          [\"a\", \"b\", \"c\"],\n          function(item) {\n            qx.core.Assert.assertIdentical(t, this);\n          },\n          this)\n        .then(function(value) {\n          qx.core.Assert.assertIdentical(t, this);\n          this.resume();\n        }, this);\n      this.wait(1000);\n    },\n\n    testMarshal: function() {\n      var marshal = new qx.data.marshal.Json();\n      marshal.toClass(qx.test.Promise.TEST_MODEL.children[0], true);\n      var model = marshal.toModel(qx.test.Promise.TEST_MODEL.children[0]);\n    },\n\n    /**\n     * Tests binding where the context is static class\n     */\n    testBindingToStatic: function() {\n      var t = this;\n      qx.Promise.resolve(true).then(function() {\n        qx.core.Assert.assertIdentical(qx.Promise, this);\n        t.resume();\n      }, qx.Promise);\n      this.wait(1000);\n    },\n\n    /**\n     * Tests the context parameter for qx.Promise.resolve\n     */\n    testBindingResolve: function() {\n      var t = this;\n      qx.Promise.resolve(true, this).then(function() {\n        qx.core.Assert.assertIdentical(t, this);\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests the context parameter for qx.Promise.reject\n     */\n    testBindingReject: function() {\n      var t = this;\n      qx.Promise.reject(new Error(\"Dummy Error\"), this).catch(function() {\n        qx.core.Assert.assertIdentical(t, this);\n        t.resume();\n      });\n      this.wait(1000);\n    },\n\n    /**\n     * Tests wrapping of parameters preserves the original values\n     */\n    testWrapping: function() {\n      var t = this;\n      new qx.Promise(function(resolve) {\n        resolve();\n\t    })\n\t    .then(function() {\n\t        return qx.Promise.all([\"foo\", new qx.data.Array([\"a\", \"b\", \"c\"])]);\n\t    })\n\t    .spread(function(str, arr) {\n\t        t.assertEquals(str, \"foo\");\n\t        t.assertInstance(arr, qx.data.Array);\n\t        t.assertEquals(arr.join(\"\"), \"abc\");\n\t        t.resume();\n\t    });\n      this.wait(1000);\n    }\n  },\n\n  statics: {\n    TEST_MODEL: {\n        \"name\": \"qx\",\n        \"children\": [\n          {\n            \"name\": \"test\",\n            \"children\": [\n              {\n                \"name\": \"Class\",\n                \"children\": [\n                  {\n                    \"name\": \"test: instantiate class in defer and access property\"\n                  },\n                  {\n                    \"name\": \"testAbstract\"\n                  },\n                  {\n                    \"name\": \"testAnonymous\"\n                  }\n                ]\n              },\n              {\n                \"name\": \"Bootstrap\",\n                \"children\": [\n                  {\n                    \"name\": \"test: define bootstrap class, which extends 'Error'\"\n                  },\n                  {\n                    \"name\": \"test: define class with constructor\"\n                  },\n                  {\n                    \"name\": \"test: extend from Bootstrap class\"\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n  }\n});\n"
  ]
}